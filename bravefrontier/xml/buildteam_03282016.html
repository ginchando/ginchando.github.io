<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Brave Frontier</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:image" content="http://ntttoon.github.io/images/fb_news.jpg" />
<meta property="og:title" content="Brave Frontier Build Team" />
<meta property="og:description" content="Build and share your team!" />
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<script src="js/libs.js"></script> 
<script src="js/ga.js"></script>
<style>
.linknounderline {
	text-decoration: none;
}
.unit {display:none};
</style>
<script>
	var l = getURLParameter('l');
	function checkTeam(){
		if(!l==''){
			buidTeam();
			document.getElementById('build_btn').style.display='none';
			document.getElementById('create_btn').style.display='block';
		}
	}
	function buidTeam(){
		document.getElementById('id01').style.display='block';
		writeOption('leader','leader_thumb','leader_out','buffs_l');
		writeOption('unit2','unit2_thumb','unit2_out','buffs_2');
		writeOption('unit3','unit3_thumb','unit3_out','buffs_3');
		writeOption('unit4','unit4_thumb','unit4_out','buffs_4');
		writeOption('unit5','unit5_thumb','unit5_out','buffs_5');
		writeOption('friend','friend_thumb','friend_out','buffs_f');
		viewBuffs('leader','buffs_l');
	    viewBuffs('unit2','buffs_2');
	    viewBuffs('unit3','buffs_3');
	    viewBuffs('unit4','buffs_4');
	    viewBuffs('unit5','buffs_5');
	    viewBuffs('friend','buffs_f');
	}
</script>
<script>
	var l = getURLParameter('l');
	var u2 = getURLParameter('u2');
	var u3 = getURLParameter('u3');
	var u4 = getURLParameter('u4');
	var u5 = getURLParameter('u5');
	var f = getURLParameter('f');
	//
	function viewBuffs(id_input,buffs_out){
		var xmlhttp, xmlDoc;
		xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", "data.xml", false);
		xmlhttp.send();
		xmlDoc = xmlhttp.responseXML;
		//
		var total = xmlDoc.getElementsByTagName("unit").length;
		//
		var n = document.getElementById(id_input).value;
		for(var i=0;i<total;i++)
		{
			id =  xmlDoc.getElementsByTagName("id")[i].childNodes[0].nodeValue;
			name =  xmlDoc.getElementsByTagName("name")[i].childNodes[0].nodeValue;
			ele =  xmlDoc.getElementsByTagName("element")[i].childNodes[0].nodeValue;
			ls =  xmlDoc.getElementsByTagName("ls")[i].childNodes[0].nodeValue;
			bb =  xmlDoc.getElementsByTagName("bb")[i].childNodes[0].nodeValue;
			sbb =  xmlDoc.getElementsByTagName("sbb")[i].childNodes[0].nodeValue;
			ubb =  xmlDoc.getElementsByTagName("ubb")[i].childNodes[0].nodeValue;
			es =  xmlDoc.getElementsByTagName("es")[i].childNodes[0].nodeValue;
			thumb =  xmlDoc.getElementsByTagName("thumb")[i].getAttribute("path");
			//
			if(n==name){
				var bb_array = bb.split("/");
				var sbb_array = sbb.split("/");
				var ubb_array = ubb.split("/");
				var es_array = es.split("/");
				
				document.getElementById(buffs_out).innerHTML = name + '<br>';
				$.each( bb_array, function( j, val ){
					if(!buffsOut(val) == ""){
						document.getElementById(buffs_out).innerHTML += '<span class="w3-tag w3-blue">' + buffsOut(val,'bb') + '</span> ';
					}
				});
				document.getElementById(buffs_out).innerHTML += '<br>';
				$.each( sbb_array, function( j, val ){
					if(!buffsOut(val) == ""){
						document.getElementById(buffs_out).innerHTML += '<span class="w3-tag w3-yellow">' + buffsOut(val,'sbb') + '</span> ';
					}
				});
				document.getElementById(buffs_out).innerHTML += '<br>';
				$.each( ubb_array, function( j, val ){
					if(!buffsOut(val) == ""){
						document.getElementById(buffs_out).innerHTML += '<span class="w3-tag w3-red">' + buffsOut(val,'ubb') + '</span> ';
					}
				});
				document.getElementById(buffs_out).innerHTML += '<br>';
				$.each( es_array, function( j, val ){
					if(!buffsOut(val) == ""){
						document.getElementById(buffs_out).innerHTML += '<span class="w3-tag w3-purple">' + buffsOut(val,'es') + '</span> ';
					}
				});
			}
		}
	}
	//
	function returnID(id_input,param)
	{
		var xmlhttp, xmlDoc;
		xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", "data.xml", false);
		xmlhttp.send();
		xmlDoc = xmlhttp.responseXML;
		//
		var total = xmlDoc.getElementsByTagName("unit").length;
		//
		//var n = document.getElementById(id_input).value;
		var n = document.getElementById(id_input).value;

		for(var i=0;i<total;i++)
		{
			id =  xmlDoc.getElementsByTagName("id")[i].childNodes[0].nodeValue;
			name =  xmlDoc.getElementsByTagName("name")[i].childNodes[0].nodeValue;
			//Check name and return id
			if(id==param){
				document.getElementById(id_input).value = name;
			}
		}
	}
	//
	function writeOption(id_input,thumb_out,div_out,buffs_out)
	{
		var xmlhttp, xmlDoc;
		xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", "data.xml", false);
		xmlhttp.send();
		xmlDoc = xmlhttp.responseXML;
		//
		var total = xmlDoc.getElementsByTagName("unit").length;
		//
		//var n = document.getElementById(id_input).value;
		var n = document.getElementById(id_input).value;
    	//alert(strSel);
		for(var i=0;i<total;i++)
		{
			id =  xmlDoc.getElementsByTagName("id")[i].childNodes[0].nodeValue;
			name =  xmlDoc.getElementsByTagName("name")[i].childNodes[0].nodeValue;
			ele =  xmlDoc.getElementsByTagName("element")[i].childNodes[0].nodeValue;
			ls =  xmlDoc.getElementsByTagName("ls")[i].childNodes[0].nodeValue;
			bb =  xmlDoc.getElementsByTagName("bb")[i].childNodes[0].nodeValue;
			sbb =  xmlDoc.getElementsByTagName("sbb")[i].childNodes[0].nodeValue;
			ubb =  xmlDoc.getElementsByTagName("ubb")[i].childNodes[0].nodeValue;
			es =  xmlDoc.getElementsByTagName("es")[i].childNodes[0].nodeValue;
			thumb =  xmlDoc.getElementsByTagName("thumb")[i].getAttribute("path");
			//Check url and return team
			if(id==l)
			{
				document.getElementById("leader_thumb").src = thumb;
				document.getElementById("leader_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			if(id==u2)
			{
				document.getElementById("unit2_thumb").src = thumb;
				document.getElementById("unit2_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			if(id==u3)
			{
				document.getElementById("unit3_thumb").src = thumb;
				document.getElementById("unit3_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			if(id==u4)
			{
				document.getElementById("unit4_thumb").src = thumb;
				document.getElementById("unit4_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			if(id==u5)
			{
				document.getElementById("unit5_thumb").src = thumb;
				document.getElementById("unit5_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			if(id==f)
			{
				document.getElementById("friend_thumb").src = thumb;
				document.getElementById("friend_out").innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
			}
			//Check input
			if(name==n)
			{
				document.getElementById(thumb_out).src = thumb;
				document.getElementById(div_out).innerHTML = '<h4>' + name + '</h4>' + '<p><b>LS: </b>' + ls + '<br>' + '<b>BB: </b>' + bb + '<br>' + '<b>SBB: </b>' + sbb + '<br>' + '<b>UBB: </b>' + ubb + '<br>' + '<b>ES: </b>' + es + '</p>';
				//export link
				var sLink = "http://ntttoon.github.io/buildteam.html";
				if(thumb_out == "leader_thumb"){
					document.getElementById("genLink").value = sLink + '?l=' + id ;
				}
				if(thumb_out == "unit2_thumb"){
					document.getElementById("genLink").value += '&u2=' + id ;
				}
				if(thumb_out == "unit3_thumb"){
					document.getElementById("genLink").value += '&u3=' + id ;
				}
				if(thumb_out == "unit4_thumb"){
					document.getElementById("genLink").value += '&u4=' + id ;
				}
				if(thumb_out == "unit5_thumb"){
					document.getElementById("genLink").value += '&u5=' + id ;
				}
				if(thumb_out == "friend_thumb"){
					document.getElementById("genLink").value += '&f=' + id ;
				}
			}
		}
	}
	//
	function searchUnit(id_input,id_list)
	{
		var xmlhttp, xmlDoc;
		xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", "data.xml", false);
		xmlhttp.send();
		xmlDoc = xmlhttp.responseXML;
		
		var total = xmlDoc.getElementsByTagName("unit").length;
		//
		var s = document.getElementById(id_input).value;
		var re = new RegExp(s, 'gi');
		for(var i=0;i<total;i++)
		{
			name =  xmlDoc.getElementsByTagName("name")[i].childNodes[0].nodeValue;
			role =  xmlDoc.getElementsByTagName("role")[i].childNodes[0].nodeValue;
			ele =  xmlDoc.getElementsByTagName("element")[i].childNodes[0].nodeValue;
			if (role.match(re) || name.match(re) || ele.match(re)) {
				id =  xmlDoc.getElementsByTagName("id")[i].childNodes[0].nodeValue;
				ele =  xmlDoc.getElementsByTagName("element")[i].childNodes[0].nodeValue;
				document.getElementById(id_list).innerHTML += "<a href='#' onClick='setValue("+ id + ',"' + id_input + '","' + id_list + '")' + "' id='" + id + "' style='color:" + nameColor(ele) + "'>" + name + "</a> ";
			}
		}
	}
	//
	function setValue(id,id_input,id_list)
	{
		v = document.getElementById(id).innerHTML;
		document.getElementById(id_input).value = v;
		document.getElementById(id_list).innerHTML = "";
	}
</script>
</head>

<body onLoad="checkTeam();">
<header class="w3-container w3-teal w3-card-2">
  <h5>BUILD TEAM</h5>
</header>
<div class="w3-blockquote w3-sand"> <a class="expander linknounderline" href="#">Read this first, click here!</a>
  <p class="content"> <span class="w3-tag w3-yellow">Type <strong>ONE</strong> of these keywords to search units who related to leader skills and buffs, or you can search by NAME (this not include Dream EVO skills):</span><br>
    <strong>HP(30%HP, 35%HP, 40%HP, 50%HP), ATK, DEF, REC, BB(BBreduce, BBregen, BBfill, BBATKed, BBATK%, BBspark, BBrate, BBcrit), BC, HC, ConvertATK, ConvertDEF, Spark, CRIT, USBB, Barrier, OverDrive, HoT, DoT, USBB, Miti, Miti50%, Null, Cure, Injury, Weak, Sick, Poison, Para, Curse, atkdown, defdown, Fire, water, earth, thunder, light, dark, EXP, Item, Karma, Zel, Idol, Revive, hit, Weakness, Stealth, Taunt, HealATKed, superspark (aka CRIT Spark), healSpark</strong> </p>
</div>
<div class="w3-container">
  <h5>Leader</h5>
  <input class="w3-input w3-border" name="search" id="leader" type="text" onChange="searchUnit('leader','leader_list');">
  <div class="w3-text" id="leader_list"></div>
  <h5>Unit 2 in team</h5>
  <input class="w3-input w3-border" name="search" id="unit2" type="text" onChange="searchUnit('unit2','unit2_list');">
  <div class="w3-text" id="unit2_list"></div>
  <h5>Unit 3 in team</h5>
  <input class="w3-input w3-border" name="search" id="unit3" type="text" onChange="searchUnit('unit3','unit3_list');">
  <div class="w3-text" id="unit3_list"></div>
  <h5>Unit 4 in team</h5>
  <input class="w3-input w3-border" name="search" id="unit4" type="text" onChange="searchUnit('unit4','unit4_list');">
  <div class="w3-text" id="unit4_list"></div>
  <h5>Unit 5 in team</h5>
  <input class="w3-input w3-border" name="search" id="unit5" type="text" onChange="searchUnit('unit5','unit5_list');">
  <div class="w3-text" id="unit5_list"></div>
  <h5>Friend</h5>
  <input class="w3-input w3-border" name="search" id="friend" type="text" onChange="searchUnit('friend','friend_list');">
  <div class="w3-text" id="friend_list"></div>
</div>
<br>
<button onclick="buidTeam()" class="w3-btn w3-red" style="width:100%" id="build_btn">Build!!!</button>
<button onclick="window.open('buildteam.html','_self')" class="w3-btn w3-blue" style="width:100%;display:none" id="create_btn">Create New!</button>
<div class="w3-container">
    <h5>Copy this Link to share your team</h5>
    <input class="w3-input w3-border" id="genLink" type="text" value="">
</div>
<div id="id01" class="w3-modal">
  <div class="w3-modal-content w3-card-4 w3-animate-zoom">
    <header class="w3-container w3-red"> <span onclick="document.getElementById('id01').style.display='none'" 
   class="w3-closebtn w3-padding-top">×</span>
      <h3>YOUR TEAM</h3>
    </header>
    <ul class="w3-pagination w3-white w3-border-bottom" style="width:100%; text-align:center">
      <li><a href="#" class="tablink" onclick="openUnit(event, 'leader_out')"><img src="images/Unit_tab.png" width="90px" id="leader_thumb" /> <br>Leader</a></li>
      <li><a href="#" class="tablink" onclick="openUnit(event, 'unit2_out')"><img src="images/Unit_tab.png" width="90px" id="unit2_thumb" /> <br>Unit</a></li>
      <li><a href="#" class="tablink" onclick="openUnit(event, 'unit3_out')"><img src="images/Unit_tab.png" width="90px" id="unit3_thumb" /> <br>Unit</a></li>
      <li><a href="#" class="tablink" onclick="openUnit(event, 'unit4_out')"><img src="images/Unit_tab.png" width="90px" id="unit4_thumb" /> <br>Unit</a></li>
      <li><a href="#" class="tablink" onclick="openUnit(event, 'unit5_out')"><img src="images/Unit_tab.png" width="90px" id="unit5_thumb" /> <br>Unit</a></li>
      <li><a href="#" class="tablink" onclick="openUnit(event, 'friend_out')"><img src="images/Unit_tab.png" width="90px" id="friend_thumb" /> <br>Friend</a></li>
      <li id="buffs_tab"><a href="#" class="tablink" onclick="openUnit(event, 'buffs_out');"><img src="images/dragon.png" height="90px"/> <br>Buffs</a></li>
    </ul>
    <div id="leader_out" class="w3-container unit w3-small"></div>
    <div id="unit2_out" class="w3-container unit w3-small"></div>
    <div id="unit3_out" class="w3-container unit w3-small"></div>
    <div id="unit4_out" class="w3-container unit w3-small"></div>
    <div id="unit5_out" class="w3-container unit w3-small"></div>
    <div id="friend_out" class="w3-container unit w3-small"></div>
    <div id="buffs_out" class="w3-container unit w3-small">
        <ul class="w3-ul">
        	<li id="buffs_l"></li>
            <li id="buffs_2"></li>
            <li id="buffs_3"></li>
            <li id="buffs_4"></li>
            <li id="buffs_5"></li>
            <li id="buffs_f"></li>
            <li>
            	Note: <br>
            	<span class="w3-tag w3-blue">BB buffs</span>
                <span class="w3-tag w3-yellow">SBB buffs</span>
                <span class="w3-tag w3-red">UBB buffs</span>
                <span class="w3-tag w3-purple">ES buffs</span>
            </li>
        </ul>
    </div>
  </div>
</div>

<script>
document.getElementsByClassName("tablink")[0].click();

function openUnit(evt, unitName) {
  var i, x, tablinks;
  x = document.getElementsByClassName("unit");
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < x.length; i++) {
    tablinks[i].classList.remove("w3-teal");
  }
  document.getElementById(unitName).style.display = "block";
  evt.currentTarget.classList.add("w3-teal");
}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script type="text/javascript" src="js/simple-expand.min.js"></script> 
<script type="text/javascript">
        $(function () {
            $('.expander').simpleexpand();
           prettyPrint();
        });
</script>
</body>
</html>
